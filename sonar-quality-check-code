pipeline{
    agent any
    stages {
        stage ('git checkout'){
            steps {
         git url: 'https://github.com/garikapatiramu/citi-bank',
         branch: 'develop'
        }
        }
         
      stage('build sonar') { 
          steps {
            parallel(
              sonarpublish: {
                withSonarQubeEnv('sonar7') {
                sh 'mvn clean sonar:sonar'
              }
              },
              appbuild: {
                 sh 'mvn clean package'
              }
            )
          }
        }
        stage("Quality Gate") {
            steps {
              timeout(time: 1, unit: 'HOURS') {
                waitForQualityGate abortPipeline: true
              }
            }
          }
    
    }
}
